/*
 * jQuery Image Reveal - A Simple Before/After Image Viewer 
 *
 * Version: 0.1.10 
 * Date: May 20th, 2015 
 * Homepage: http://github.com/jameswyse/jquery-image-reveal
 * Licence:  
 * Copyright: (c) 2015 James Wyse; 
 */
!function(a){a.fn.extend({imageReveal:function(b){function c(a,c){0>a&&(a=0),a>b.width&&(a=b.width),a<b.paddingLeft&&(a=b.paddingLeft),a>b.width-b.paddingRight&&(a=b.width-b.paddingRight),e[c].overlay.width(a);var d=a-b.barWidth/2;if(0>d&&(d=0),d>b.width-b.barWidth&&(d=b.width-b.barWidth),e[c].drag.css({left:d}),b.showCaption){var f=e[c].before.attr("title"),g=e[c].after.attr("title");a>b.width*b.captionChange?f&&""!==f?e[c].caption.text(f).fadeIn(b.captionFade||1e3).data("link",e[c].before.data("link")):e[c].caption.fadeOut(b.captionFade||1e3):g&&""!==g?e[c].caption.text(g).fadeIn(b.captionFade||1e3).data("link",e[c].after.data("link")):e[c].caption.fadeOut(b.captionFade||1e3)}}function d(d){var f=a(this).data("imageRevealID");if(!e[f].dragging&&"click"!==d.type)return!1;var g;return d.originalEvent&&d.originalEvent.changedTouches?(b.touchDevice||(b.touchDevice=!0,b.originalBarWidth=b.barWidth,b.barWidth=parseInt(b.touchBarWidth,10),a.each(b.ids,function(a,c){var d=e[c].drag.position().left-(b.touchBarWidth/2-b.originalBarWidth/2);e[c].drag.width(b.touchBarWidth).css({left:d})})),g=d.originalEvent.changedTouches[0].pageX):g=d.pageX,c(g-e[f].overlay.offset().left,f),!1}var e={};return b=a.extend({},{barWidth:20,touchBarWidth:60,startPosition:.5,paddingLeft:0,paddingRight:0,showCaption:!1,linkCaption:!1,captionChange:.5,width:500,height:500,ids:[]},b),b.ids=[],b.startPosition>1?b.startPosition=1:b.startPosition<0&&(b.startPosition=0),b.captionChange>1?b.captionChange=1:b.captionChange<0&&(b.captionChange=0),this.each(function(d){e[d]={},b.ids.push(d),e[d].container=a(this).addClass("imageReveal").data("imageRevealID",d),e[d].before=e[d].container.children("img").first().width(b.width).height(b.height).hide(),e[d].after=e[d].before.next().width(b.width).height(b.height).hide(),e[d].container.width(b.width).height(b.height).css({overflow:"hidden",position:"relative"}).append('<div class="imageReveal-overlay"></div>').append('<div class="imageReveal-background"></div>').append('<div class="imageReveal-drag"></div>').append('<div class="imageReveal-caption">'+e[d].before.attr("title")+"</div>"),e[d].bg=e[d].container.children(".imageReveal-background").width(b.width).height(b.height).css({"background-image":"url("+e[d].after.attr("src")+")","background-size":b.width+"px "+b.height+"px"}),e[d].caption=e[d].container.children(".imageReveal-caption"),b.showCaption&&e[d].before.attr("title")&&""!==e[d].before.attr("title")?e[d].caption.show():e[d].caption.hide(),b.linkCaption&&e[d].caption.css("cursor","pointer").data("link",e[d].before.data("link")).on("click",function(){return e[d].caption.data("link")&&(window.location=e[d].caption.data("link")),!1}),e[d].overlay=e[d].container.children(".imageReveal-overlay").width(b.width).height(b.height).css({"background-image":"url("+e[d].before.attr("src")+")","background-size":b.width+"px "+b.height+"px"}).animate({width:b.width-b.width*b.startPosition}),e[d].drag=e[d].container.children(".imageReveal-drag").width(b.barWidth).height(b.height).animate({right:b.width*b.startPosition-b.barWidth/2}).on("mousedown touchstart",function(){return e[d].dragging=!0,e[d].drag.addClass("dragging"),!1}).on("mouseup touchend touchcancel",function(){return e[d].dragging=!1,e[d].drag.removeClass("dragging"),!1}),a(document).on("mouseup touchend touchcancel",function(){e[d].dragging&&(e[d].dragging=!1,e[d].drag.removeClass("dragging"))}),e[d].container.on("mouseout",function(a){e[d].dragging&&c(a.pageX-e[d].overlay.offset().left,d)})}).on("mousemove click touchmove",d)}})}(jQuery);